<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>使用 ZeroTier 搭建自己的 IPv6 网络 | ZeroZawa</title><meta name="author" content="zerozawa"><meta name="copyright" content="zerozawa"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ZeroTier + VPS 搭建IPv6隧道"><meta property="og:type" content="article"><meta property="og:title" content="使用 ZeroTier 搭建自己的 IPv6 网络"><meta property="og:url" content="http://www.zerozawa.top/2023/%E4%BD%BF%E7%94%A8-zerotier-%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84-ipv6-%E7%BD%91%E7%BB%9C/"><meta property="og:site_name" content="ZeroZawa"><meta property="og:description" content="ZeroTier + VPS 搭建IPv6隧道"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_80562260_p0_%E3%83%92%E3%83%88%E3%81%93%E3%82%82%E3%82%8B_no%20title.jpg"><meta property="article:published_time" content="2023-11-16T08:45:07.000Z"><meta property="article:modified_time" content="2023-11-22T05:29:10.000Z"><meta property="article:author" content="zerozawa"><meta property="article:tag" content="ZeroTier"><meta property="article:tag" content="IPv6"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_80562260_p0_%E3%83%92%E3%83%88%E3%81%93%E3%82%82%E3%82%8B_no%20title.jpg"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://www.zerozawa.top/2023/%E4%BD%BF%E7%94%A8-zerotier-%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84-ipv6-%E7%BD%91%E7%BB%9C/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/site.webmanifest"><link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png"><link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,top_n_per_article:-1,unescape:!0,languages:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#a78381",bgDark:"#1f1f1f",position:"bottom-left"},source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!0},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"使用 ZeroTier 搭建自己的 IPv6 网络",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-11-22 13:29:10"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){0!==a&&(a=864e5*a,t={value:t,expiry:(new Date).getTime()+a},localStorage.setItem(e,JSON.stringify(t)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.getCSS=(o,n=!1)=>new Promise((t,e)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{const d=document.getElementById("loading-box"),e=document.body,n={endLoading:()=>{e.style.overflow="",d.classList.add("loaded")},initLoading:()=>{e.style.overflow="hidden",d.classList.remove("loaded")}};n.initLoading(),window.addEventListener("load",()=>{n.endLoading()}),document.addEventListener("pjax:send",()=>{n.initLoading()}),document.addEventListener("pjax:complete",()=>{n.endLoading()})})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_90929970_p0_ヒトこもる_無題.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">57</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 画廊</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_80562260_p0_ヒトこもる_no%20title.jpg)"><nav id="nav"><span id="blog-info"><a href="/" title="ZeroZawa"><img class="site-icon" src="/favicon.ico"><span class="site-name">ZeroZawa</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 画廊</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">使用 ZeroTier 搭建自己的 IPv6 网络</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-16T08:45:07.000Z" title="发表于 2023-11-16 16:45:07">2023-11-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-22T05:29:10.000Z" title="更新于 2023-11-22 13:29:10">2023-11-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/nas/">nas</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">986</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>3分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="使用 ZeroTier 搭建自己的 IPv6 网络"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2023/%E4%BD%BF%E7%94%A8-zerotier-%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84-ipv6-%E7%BD%91%E7%BB%9C/#post-comment"><span class="gitalk-comment-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>参考：</p><ul><li><a target="_blank" rel="noopener" href="https://lisz.me/tech/linux/zerotier.html">使用 zerotier 搭建自己的 IPv6 网络</a></li><li><a target="_blank" rel="noopener" href="https://lala.im/5015.html">利用 ZeroTier 建立 IPv6 隧道</a></li></ul><p>基本按照上面的文章来就行了，我写的也就是照本宣科，但经过实践还是有些许不一样的地方，下面会加粗标注。</p><h2 id="环境"><a class="header-anchor" href="#环境"></a>环境</h2><ul><li>一台公网服务器，这里我用的是 debian 系统</li><li>一个可用的固定 IPv6 网段</li><li>client, 可以是路由器（openwrt）也可以是 pc, 路由器建议不要用隧道的 ipv6, 而是用 ISP 给的原生动态 ipv6，所以推荐 pc</li></ul><h2 id="申请-IPv6-网段"><a class="header-anchor" href="#申请-IPv6-网段"></a>申请 IPv6 网段</h2><p>目前，全球范围内除了由基础通信服务商、数据中心、高校等拥有一大批可用的 IPv6 网段外，基本上无法个人进行申请。唯一可用的无限制 IPv6 网段申请就是 <a target="_blank" rel="noopener" href="https://www.tunnelbroker.net/">He.net</a> 提供的 6to4 IPv6 隧道服务。可访问网站进行注册登录，登录后在左上方的 User Functions 里选择 Create Regular Tunnel，然后在 You are viewing from 这个位置会显示出你访问时所用的公网 IP 地址。此处的 IPv4 Endpoint 填的是 ECS 服务器的公网 IPv4 地址，至于以下的 Tunnel Server 应该选择哪个需要在 ECS 服务器上 ping 各个服务器来确定延迟，选取延迟最低的一个位置。(此段转载自<a target="_blank" rel="noopener" href="https://lisz.me/tech/linux/zerotier.html">使用 zerotier 搭建自己的 IPv6 网络</a>)</p><p>该作者指出阿里云的 vps 最好使用 Fremont、CA、US 的 Tunnel Server，而不是香港的，而我本人使用的狗云的香港服务器，和香港的 Tunnel Server 之间的 ping 值出奇的低，估计两者不在同一个机房也是邻居的关系，所以我选择了香港的 Tunnel Server。<strong>所以在选择 Tunnel Server 之前一定要注意测试一下</strong>。</p><p>该作者还不知道为什么申请了一个/48 的网段，搞得我一开始以为一定得 48 的网段呢，网上也有其他教程说一定需要的，但实测不需要，普通的/64 就 ok.</p><h2 id="配置-IPv6"><a class="header-anchor" href="#配置-IPv6"></a>配置 IPv6</h2><p><a target="_blank" rel="noopener" href="https://www.tunnelbroker.net/">He.net</a>会给出对应的配置文件，先配置好</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line">apt -y update</span><br><span class="line">apt -y install curl sudo net-tools</span><br><span class="line"><span class="comment"># 安装 ndppd</span></span><br><span class="line">apt -y install ndppd</span><br><span class="line"><span class="comment"># 修改内核参数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv6.conf.default.forwarding = 1&quot;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv6.conf.all.forwarding = 1&quot;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv6.conf.all.proxy_ndp = 1&quot;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv6.conf.all.accept_ra = 2&quot;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line">sysctl -p</span><br><span class="line"><span class="comment"># 安装ZeroTier</span></span><br><span class="line">curl -s https://install.zerotier.com/ | sudo bash</span><br><span class="line"><span class="comment"># 加入网络</span></span><br><span class="line">zerotier-cli <span class="built_in">join</span> xxxx</span><br><span class="line"><span class="comment"># 设置权限</span></span><br><span class="line">zerotier-cli <span class="built_in">set</span> xxxx allowGlobal=<span class="literal">true</span></span><br><span class="line">zerotier-cli <span class="built_in">set</span> xxxx allowDefault=1</span><br></pre></td></tr></table></figure><p>来到 zerotier 面板。</p><p>勾选</p><p><img src="../../img/etc/%E4%BD%BF%E7%94%A8zerotier%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84IPv6%E7%BD%91%E7%BB%9C-1.png" alt="内网ipv6地址分配"></p><p>复制 ip，对应的设备是刚刚加入的云服务器</p><p><img src="../../img/etc/%E4%BD%BF%E7%94%A8zerotier%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84IPv6%E7%BD%91%E7%BB%9C-2.png" alt="自动分配的内网ipv6"></p><p><em>Managed Routes</em> 中添加路由：</p><table><thead><tr><th>Destination</th><th>Via</th></tr></thead><tbody><tr><td>::/0</td><td>云服务器 fd 开头的内网 ipv6 地址</td></tr></tbody></table><p>查看刚刚获取的 ipv6 前缀，比如说是 2001:xxx:xx:xxx::/64</p><p><em>Managed Routes</em> 中再添加路由：</p><table><thead><tr><th>Destination</th><th>Via</th></tr></thead><tbody><tr><td>2001:xxx:xx:xxx:ff::/80</td><td>不填</td></tr></tbody></table><p><strong>IPv6 Auto-Assign</strong> 勾选 <em>Auto-Assign from Range</em></p><p>添加</p><table><thead><tr><th>Range Start</th><th>Range End</th></tr></thead><tbody><tr><td>2001:xxx:xx:xxx:ff::2</td><td>2001:xxx:xx:xxx:ff:ffff:ffff:ffff</td></tr></tbody></table><p>然后提交，等待一会，就可以在 zerotier 中看到 ipv6 地址已经分配好了。</p><p>服务器上最后配置 ipv6 转发 (/etc/ndppd.conf)：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">route-ttl 30000</span><br><span class="line"></span><br><span class="line">address-ttl 30000</span><br><span class="line">; 网卡填写主网卡</span><br><span class="line">proxy eth0 &#123;</span><br><span class="line">   router yes</span><br><span class="line">   timeout 500</span><br><span class="line">   autowire no</span><br><span class="line">   keepalive yes</span><br><span class="line">   retries 3</span><br><span class="line">   promiscuous no</span><br><span class="line">   ttl 30000</span><br><span class="line">   rule 2001:xxx:xx:xxx:ff::/80 &#123;</span><br><span class="line">      auto</span><br><span class="line">      autovia no</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ndppd，启动！</span></span><br><span class="line">systemctl start ndppd</span><br><span class="line"><span class="comment"># 启动后看下状态，有概率出问题，出了问题后重启下应该就没事了</span></span><br><span class="line">systemctl status ndppd</span><br><span class="line">systemctl restart ndppd</span><br></pre></td></tr></table></figure><p>但实际终端设备上还需要再进行一步配置，假设是 linux 终端的话，执行命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zerotier-cli <span class="built_in">set</span> xxxx allowGlobal=<span class="literal">true</span></span><br><span class="line">zerotier-cli <span class="built_in">set</span> xxxx allowDefault=1</span><br></pre></td></tr></table></figure><p>至此，全部完成。</p><h2 id="测试"><a class="header-anchor" href="#测试"></a>测试</h2><p><img src="../../img/etc/%E4%BD%BF%E7%94%A8zerotier%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84IPv6%E7%BD%91%E7%BB%9C-3.png" alt="ifconfig 网卡信息"></p><p>可以看到，<code>ifconfig</code> 的输出中，终端机是没有从 wifi 网卡中获取到 ipv6 地址的，但是 zerotier 的虚拟网卡中获得了一个 global ipv6 地址。</p><p><img src="../../img/etc/%E4%BD%BF%E7%94%A8zerotier%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84IPv6%E7%BD%91%E7%BB%9C-4.png" alt="经典 ipv6 test"></p><p>梯子关掉后，经典的 ipv6 test 也是可以通过的。</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://www.zerozawa.top">zerozawa</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.zerozawa.top/2023/%E4%BD%BF%E7%94%A8-zerotier-%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84-ipv6-%E7%BD%91%E7%BB%9C/">http://www.zerozawa.top/2023/使用-zerotier-搭建自己的-ipv6-网络/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.zerozawa.top" target="_blank">ZeroZawa</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ZeroTier/">ZeroTier</a><a class="post-meta__tags" href="/tags/IPv6/">IPv6</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_80562260_p0_ヒトこもる_no%20title.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/%E5%85%AC%E5%85%B1-dns-%E6%94%B6%E9%9B%86%E6%80%BB%E7%BB%93/" title="公共 DNS 收集总结"><img class="cover" src="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_94573417_p0_ヒトこもる_祭花.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">公共 DNS 收集总结</div></div></a></div><div class="next-post pull-right"><a href="/2023/nixos%E4%B8%8B%E7%9A%84-devbox-%E4%BD%BF%E7%94%A8/" title="NixOS下的 DevBox 使用"><img class="cover" src="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_97608845_p0_ヒトこもる_落花.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">NixOS下的 DevBox 使用</div></div></a></div></nav><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_90929970_p0_ヒトこもる_無題.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">zerozawa</div><div class="author-info__description">author of noveler</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">57</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lz37"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/lz37" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:zekaixie37@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#a78381"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83"><span class="toc-text">环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B3%E8%AF%B7-IPv6-%E7%BD%91%E6%AE%B5"><span class="toc-text">申请 IPv6 网段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-IPv6"><span class="toc-text">配置 IPv6</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-text">测试</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/hello-world/" title="Hello World"><img src="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_94573417_p0_ヒトこもる_祭花.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Hello World"></a><div class="content"><a class="title" href="/2023/hello-world/" title="Hello World">Hello World</a><time datetime="2023-11-23T06:43:51.000Z" title="更新于 2023-11-23 14:43:51">2023-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/openwrt-%E7%B3%BB%E7%BB%9F-squashfs-%E5%9B%BA%E4%BB%B6%E6%89%A9%E5%AE%B9%E6%96%B9%E6%B3%95/" title="Openwrt 系统 SquashFS 固件扩容方法"><img src="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_80562260_p0_ヒトこもる_no%20title.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Openwrt 系统 SquashFS 固件扩容方法"></a><div class="content"><a class="title" href="/2023/openwrt-%E7%B3%BB%E7%BB%9F-squashfs-%E5%9B%BA%E4%BB%B6%E6%89%A9%E5%AE%B9%E6%96%B9%E6%B3%95/" title="Openwrt 系统 SquashFS 固件扩容方法">Openwrt 系统 SquashFS 固件扩容方法</a><time datetime="2023-11-23T06:43:51.000Z" title="更新于 2023-11-23 14:43:51">2023-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/truenas-scale-%E4%BD%BF%E7%94%A8-k8s-%E5%AE%89%E8%A3%85-portainer-%E7%AE%A1%E7%90%86-docker/" title="TrueNAS SCALE 使用 K8S 安装 portainer 管理 docker"><img src="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_80562260_p0_ヒトこもる_no%20title.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="TrueNAS SCALE 使用 K8S 安装 portainer 管理 docker"></a><div class="content"><a class="title" href="/2023/truenas-scale-%E4%BD%BF%E7%94%A8-k8s-%E5%AE%89%E8%A3%85-portainer-%E7%AE%A1%E7%90%86-docker/" title="TrueNAS SCALE 使用 K8S 安装 portainer 管理 docker">TrueNAS SCALE 使用 K8S 安装 portainer 管理 docker</a><time datetime="2023-11-23T06:43:51.000Z" title="更新于 2023-11-23 14:43:51">2023-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/%E5%AE%B6%E7%94%A8-nas-%E6%8E%A8%E8%8D%90%E6%96%B9%E6%A1%88/" title="家用 nas 推荐方案"><img src="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_80562260_p0_ヒトこもる_no%20title.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="家用 nas 推荐方案"></a><div class="content"><a class="title" href="/2023/%E5%AE%B6%E7%94%A8-nas-%E6%8E%A8%E8%8D%90%E6%96%B9%E6%A1%88/" title="家用 nas 推荐方案">家用 nas 推荐方案</a><time datetime="2023-11-23T06:43:51.000Z" title="更新于 2023-11-23 14:43:51">2023-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/%E8%A7%A3%E5%86%B3-luci-%E7%9A%84-samba-%E6%8F%92%E4%BB%B6%E6%97%A0%E6%B3%95%E6%8C%82%E8%BD%BD%E7%9A%84%E9%97%AE%E9%A2%98/" title="解决 luci 的 samba 插件无法挂载的问题"><img src="https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@main/img/pixiv/30837811_80562260_p0_ヒトこもる_no%20title.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="解决 luci 的 samba 插件无法挂载的问题"></a><div class="content"><a class="title" href="/2023/%E8%A7%A3%E5%86%B3-luci-%E7%9A%84-samba-%E6%8F%92%E4%BB%B6%E6%97%A0%E6%B3%95%E6%8C%82%E8%BD%BD%E7%9A%84%E9%97%AE%E9%A2%98/" title="解决 luci 的 samba 插件无法挂载的问题">解决 luci 的 samba 插件无法挂载的问题</a><time datetime="2023-11-23T06:43:51.000Z" title="更新于 2023-11-23 14:43:51">2023-11-23</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/gh/lz37/lz37.github.io@master/source/img/pixiv/2179695_86142125_p0_羽々斬_自機の人たち.png)"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By zerozawa</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">苏ICP备20230222124号-1</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>document.querySelectorAll("#article-container span.katex-display").forEach(a=>{btf.wrap(a,"div",{class:"katex-wrap"})})</script><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0!==e.length){const n=()=>{window.loadMermaid=!0;const r="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(e).forEach((e,t)=>{const n=e.firstElementChild;e="%%{init:{ 'theme':'"+r+"'}}%%\n"+n.textContent;const d=mermaid.render("mermaid-"+t,e);"string"==typeof d?(t=d,n.insertAdjacentHTML("afterend",t)):d.then(({svg:e})=>{n.insertAdjacentHTML("afterend",e)})})};var t=()=>{window.loadMermaid?n():getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(n)};btf.addModeChange("mermaid",n),window.pjax?t():document.addEventListener("DOMContentLoaded",t)}})()</script><script>function loadGitalk(){function t(){new Gitalk(Object.assign({clientID:"53077ce62141595ccce5",clientSecret:"d7cfa4d9ec66065a9882082f3e445db94b6755ea",repo:"lz37.github.io",owner:"lz37",admin:["lz37"],id:"4924f29afdbf76cafa8f71ee251a4c4a",updateCountCallback:commentCount},null)).render("gitalk-container")}"function"==typeof Gitalk?t():(getCSS("https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"),getScript("https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js").then(t))}function commentCount(t){var n=document.querySelector("#post-meta .gitalk-comment-count");n&&(n.textContent=t)}function loadOtherComment(){loadGitalk()}loadGitalk()</script></div><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();var e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script");var o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>